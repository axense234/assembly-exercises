     1                                  bits 32
     2                                  
     3                                  global _num_product        
     4                                  
     5                                  segment code use32 class=code
     6                                  ; int num_product(int *numbers, int LEN) {...} -> returns the product of given numbers
     7                                  _num_product:
     8 00000000 55                          push ebp
     9 00000001 89E5                        mov ebp, esp
    10 00000003 53                          push ebx
    11                                      
    12                                      ; for (int i = 0; i < LEN ; ++i){
    13                                      ;   product *= numbers[i];
    14                                      ; }
    15                                      ; return product;
    16                                      
    17                                      ; if (LEN < 1) return 0;
    18                                      
    19                                      .if_empty_cond:
    20 00000004 837D0C01                        cmp dword [ebp + 12], 1
    21 00000008 7C1D                            jl .if_empty_body
    22                                          
    23                                      .for_init:
    24 0000000A B801000000                      mov eax, 1
    25 0000000F B900000000                      mov ecx, 0
    26                                      
    27                                      .for_cond:
    28 00000014 3B4D0C                          cmp ecx, [ebp + 12]
    29 00000017 7D0C                            jge .for_end
    30                                      
    31                                      .for_body:
    32 00000019 8B5D08                          mov ebx, [ebp + 8]
    33 0000001C 8D1C8B                          lea ebx, [ebx + ecx * 4]
    34 0000001F 0FAF03                          imul eax, [ebx] ; eax = eax * ebx
    35                                          
    36                                      .for_post:
    37 00000022 41                              inc ecx
    38 00000023 EBEF                            jmp .for_cond
    39                                      
    40                                      .for_end:
    41 00000025 EB0A                            jmp .program_end
    42                                      
    43                                      .if_empty_body:
    44 00000027 B800000000                      mov eax, 0
    45                                          
    46 0000002C 5B                              pop ebx
    47                                          
    48 0000002D 89EC                            mov esp, ebp
    49 0000002F 5D                              pop ebp
    50 00000030 C3                              ret
    51                                  
    52                                      
    53                                      .program_end:
    54 00000031 5B                              pop ebx 
    55                                          
    56 00000032 89EC                            mov esp, ebp
    57 00000034 5D                              pop ebp
    58 00000035 C3                              ret
    59                                      
    60                                      
    61                                     
